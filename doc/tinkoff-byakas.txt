Решил собирать проблемы (вопросы к) с OpenAPI

1) Типы Streaming API не описаны в yaml'е.
   Неудобно, что они не сгенерировались

2) Отдельно непонятно, какого хрена для одних и тех же данных
   в Streaming API и REST API используются разные раскладки объектов.

   Это про Orderbook. Спасибо, что Candle одинаковая.

3) Зачем-то при отписке от стакана нужно указывать глубину.

4) TradeStatus в Streaming API и REST API
   NormalTrading/normal_trading
   NotAvailableForTrading/not_available_for_trading

   Такое впечатление, что у них там левая нога не знает, что делает правая.

5) По инструментам нет информации, на какой бирже он торгуется. Пока я все на MOEX записал.
   Но похоже, что через тиньковское API доступ производится к разным биржам.

6) Нет данных, с какой даты доступны данные по свечам.

     - Данные по месячным/недельным/дневным свечам не составляют проблемы - 
       они запрашиваются за большой период, и проскакивают быстро.
     - Проблему составляют intraday свечи - макс период запроса - один день -
       плюс ограничение на количество запросов в минуту - это в итоге всё очень долго.

   В итоге для выкачки исторических свеч я изобрел примерно такой, возможно, не самый прямой алгоритм:

     - Изначально считаем, что данные по свечам доступны с момента основания биржи (MOEX)
     - Запрашиваем свечи, начиная с длиннейших.
     - Более короткие свечи начинаем запрашивать с той даты, на которую есть первая более
       длинная свеча - я исходил из той логики, что более короткие свечи начали собираться
       позже более длинных (или, возможно, более короткие свечи хранят за меньший период,
       периодически подчищая старьё) - хотя все свечи за несколько лет у меня заняли
       меньше 100 Гб - для большой конторы такие объемы не должны быть проблемой.
     - При обновлении (докачке) свечей - сначала пытаюсь найти дату последней скачанной свечи.
       Если не нашел - то идем в сначала. 

7) Нет данных о том, какие инструменты когда-либо торговались с аккаунта.
   В портфеле возвращаются только те инструменты, которые есть в наличии.
   Опять кроме полного перебора - нет вариантов. Опять - перебор и хранить 
   текущий контекст локально.

8) Нет ленты сделок. Я пока собственно основы тех-анализа только начал изучать,
   но похоже, что лента сделок - довольно важный инструмент.
   Запросы на эту фичу нашел с 2019 года - сейчас середина 21ого, но тинковцы
   так и не расчесались сделать это.
   Плохой признак. Вероятно, что так и до конца правления Путина ничего не сделают.
   И после - тоже вряд ли.

9) Нет кучи информации, которая есть в мобильном клиенте. Например - информация
   о маржинальной торговле - сумма по непокрытым позициям, и размер комиссии.
   Размеры комиссии по маржинальной торговле - и в инете-то не так просто найти.

10) Можно было бы и дублировать price increment в стакане, и везде, где он может понадобиться.


Итого:

   Без докачки кучи данных (а полная выкачка исторических данных займёт 2-3 месяца)
   нет возможности производить какой-либо исторический анализ.

   В связи с этим - гемор - допустим, робот дома/на выделенном серваке крутится 24/7.
   Анализировать данные на другом компе (и возможно, указывать ТРу стратегии поведения) 
   - нельзя так просто взять и всё скачать. Нужна куча телодвижений. 

   Исторические данные нигде нельзя скачать. Каждый сам качает. Нехилая, и, на самом деле,
   тупая и на пустом месте ненужная нагрузка на сервера.

   Для мобильного клиента - да, оно всё не нужно. Но OpenAPI позиционируется
   как API для алго-трейдеров - а по факту - просто опубликовали API своего торгового клиента,
   и то, похоже, только часть.

   Нет развития. Складывается впечатление - что просто "кинули кость" для доморощенных 
   энтузиастов алго-трейдинга, получили хороший выхлоп от этого, а дальше - забили - 
   от дальнейшего развития API хайпа никакого, клиентов не прибавится, а работать таки надо.

   Отдельно - по мобильному приложению. За пол-часа/час активного тапания оно начинает не слабо
   подтупливать. В C++ текут ресурсы, говорили они, в управляемой среде на виртуальной машине
   с гарбадж-коллектором это невозможно, говорили они. Но у тинковцев, видимо, получилось сделать
   невозможное. Талант не пропьешь, видимо.

   Но, конечно, не могу и высказаться в защиту тиньковского мобильного приложения.
   Сберовский мобильный клиент - это полное убожество. Автовыход короче, чем у тинькова,
   а после нового захода - какие-то активные действия с портфелем можно производить
   только после подтверждающей СМС-ки. На главной странице, где саммари по портфелю -
   данные могут отставать от реального положения дел на недели. Я фиксировал
   где-то пять недель. На сберовском счете у меня активы, которые просели, поэтому
   уже несколько месяцев не запускал это рукоблудие. Как только будет возможность продать
   не в минус - продам и через наличные выведу. Теоретически, есть способ перекинуть 
   бумаги с одного брокера на другого, но это тоже гемморой порядочный.
   Но туда же - СберТех, БигДата, ИИ, автомобильный автопилот, хайп, хайп, хайп...
   А нанять пару средней руки программистов и сделать нормальное приложение под мобилку
   - это уже через чур сложно.
   По поводу банковских приложений Тинькова и Сбера - ощущения аналогичные.






