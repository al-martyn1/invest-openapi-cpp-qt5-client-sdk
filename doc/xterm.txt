  Коротенько по _tkf_simple_xterm


1) Ему нужна базовая база tkf_invest_main_db.sqlite
   Создать можно при помощи _tkf_create_db и заполнить при помощи _tkf_update_instruments


2) Нужны конфиги (каталог conf)
   auth.properties
   database.properties
   instruments.properties
   terminal.properties

   Для auth.properties нужен токен, получить можно тут - https://www.tinkoff.ru/invest/settings/

   Если выбран режим песочницы для пустой игры, то нужен sandbox.properties, 
   который задаёт состояние портфеля для песочницы,
   и _tkf_sandbox_add_positions, который заполняет его


3) Список инструментов для терминала тут - instruments.properties
   Надо учитывать, что это консольное приложение, без прокрутки и прочего.
   30-40 инструментов на современном экране могут поместиться, но не более.


4) Настройки терминала - тут - terminal.properties

   Здесь лежат настройки колонок таблицы, и список колонок.
   Настройки колонок обычно трогать нет нужды, а список колонок позволяет
   поднастроить таблицу под себя.

   У меня - такой:

     terminal.columns = TICKER,INSTR_STATE,PRICE_INC,LOT_SIZE,PORTFOLIO_QUANTITY,PORTFOLIO_EXPECTED_YELD,\
     VB1,PORTFOLIO_PRICE,CUR_PRICE,\
     VB2,LAST_BUY_QUANTITY,LAST_BUY_PRICE,LAST_SELL_PRICE,LAST_SELL_QUANTITY,SP,\
     VB2,BEST_BID,SP,SP,SP,SPREAD_POINTS,BEST_ASK,\
     VB,MAX_BID_QUANTITY,MAX_BID_PRICE,SP,SP,SP,SPREAD_POINTS,MIN_ASK_PRICE,MIN_ASK_QUANTITY,\
     VB2,CUR_PRICE,SP,PORTFOLIO_PRICE,SP,INSTR_STATE,TICKER

   В этом списке для удобства часть информационных полей слева продублирована также справа.

   Разделители колонок:

     VB1 (VB), VB2, VB3 - vertical break, число в имени задаёт ширину

     SP - space - колонка пробелов


   Разделители колонок и строк настраиваются так:

     terminal.hbreaks.caption.before = true
     terminal.hbreaks.caption.after  = true
     terminal.hbreaks.table.after    = true
     terminal.hbreaks.regular        = 4        ; черз каждые 4 строки выводить горизонтальный разделитель
                                                ; помогает в навигации (глазами)

     terminal.hbreaks.style.caption.before = -
     terminal.hbreaks.style.caption.after  = -
     terminal.hbreaks.style.table.after    = -
     terminal.hbreaks.style.regular        = -


5) Ввод команд (приглашение - внизу - '>')

   Сейчас поддерживаются команды '+'/'-'.

   '+' - размещение заявки на покупку
   '-' - размещение заявки на продажу

   Строковый редактор - простейший, позволяет только стирать последний символ (по Backspace).
   Клавиша Del - работает как Backspace.

   Пробел (Space) - это просто пробел. Несколько пробелов ввести нельзя - незачем.

   Фича автокомплита - при вводе заявок по первым буквам ищется тикер, и если находится, 
   то выдаётся целиком (в виде подсказки, другим цветом). Для ввода достаточно акцептнуть табом.

   Tab - а) акцепт автокомплита (подсказка отображается другим цветом)
         б) как пробел остальных случаях

   '/' на цифровой клавиатуре - работает как Tab - набирать числа и вставлять между ними пробелы удобно в одном месте.
       В режиме команд '+'/'-' - символ '/' не используется (но если очень нужно, то его можно набрать на основной клавиатуре).

   '+' и '-' на основной клавиатуре работают по-разному - для '+' надо нажимать Shift, иначе выходит '='.

   Если вводимый символ - первый в вводимой строке, то символ '=' заменяется на '+' - 
   удобно при использовании основной клавиатуры не дрочить шифтом 
   (это уже фича не драйвера клавиатуры или редактора, а самого терминала).

   Ctrl+V, Shift+Ins - оббрабатываются на уровне драйвера клавиатуры, и выдают на вход редактору уже ASCII текст.
   Не надо код редактора переписывать для использования под STM2 - только драйвер клавиатуры (прощу прощения за тех. подробности).


   // Что ещё по редактору?


6) Описать формат строки заявки




